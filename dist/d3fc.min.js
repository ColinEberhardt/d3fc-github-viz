/*! d3fc 05-02-2016 */

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("css-layout"),require("d3"),require("svg-innerhtml")):"function"==typeof define&&define.amd?define(["css-layout","d3","svg-innerhtml"],b):a.fc=b(a.computeLayout,a.d3,a.svg_innerhtml)}(this,function(a,b,c){"use strict";function d(a){var b=a.ownerDocument.defaultView.getComputedStyle(a);return{width:parseFloat(b.width)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight),height:parseFloat(b.height)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)}}function e(a){for(;a.ownerSVGElement;)a=a.ownerSVGElement;return a}function f(a){if(!a)return{};var b=a.split(";"),c={};return b.forEach(function(a){var b=a.split(":");if(2===b.length){var d=b[0].trim(),e=b[1].trim();c[d]=isNaN(e)?e:Number(e)}}),c}function g(a){function b(){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];1===d.nodeType&&d.getAttribute("layout-style")&&b.push(g(d))}return b}return{style:f(a.getAttribute("layout-style")),children:b(a),element:a}}function h(a,b){b&&(a.element.setAttribute("layout-width",a.layout.width),a.element.setAttribute("layout-height",a.layout.height)),a.element.setAttribute("layout-x",a.layout.left),a.element.setAttribute("layout-y",a.layout.top);var c=a.element.nodeName.match(/(?:svg|rect)/i);c&&(a.element.setAttribute("width",a.layout.width),a.element.setAttribute("height",a.layout.height)),c&&b&&(a.element.setAttribute("x",a.layout.left),a.element.setAttribute("y",a.layout.top)),!c&&b&&a.element.setAttribute("transform","translate("+a.layout.left+", "+a.layout.top+")"),a.children.forEach(function(a){h(a,!0)})}function i(a){return a.hasAttribute("layout-width")&&a.hasAttribute("layout-height")?{width:Number(a.getAttribute("layout-width")),height:Number(a.getAttribute("layout-height"))}:d(a)}function j(a){return a.hasAttribute("layout-x")&&a.hasAttribute("layout-y")?{x:Number(a.getAttribute("layout-x")),y:Number(a.getAttribute("layout-y"))}:{x:0,y:0}}function k(b){if("suspended"!==e(b).__layout__){var c=i(b),d=j(b),f=g(b);f.style.width=c.width,f.style.height=c.height,f.style.left=d.x,f.style.top=d.y,a(f),h(f)}}function l(a){return arguments.length?this.each(function(){e(this).__layout__=a?"suspended":""}):Boolean(e(this.node()).__layout__)}function m(a,b){var c=arguments.length;if(1===c&&"string"==typeof a){var d=this.node();return Number(d.getAttribute("layout-"+a))}return this.each(function(){if(2===c)"string"!=typeof a?(this.setAttribute("layout-width",a),this.setAttribute("layout-height",b),k(this)):this.setAttribute("layout-style",a+":"+b);else if(1===c){if("string"!=typeof a){var d=f(this.getAttribute("layout-style")),e=a;Object.keys(e).forEach(function(a){d[a]=e[a]});var g=Object.keys(d).map(function(a){return a+":"+d[a]}).join(";");this.setAttribute("layout-style",g)}}else 0===c&&k(this)})}function n(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}function o(a,b){var c=Math.max(a.x,b.x),d=Math.min(a.x+a.width,b.x+b.width),e=Math.max(a.y,b.y),f=Math.min(a.y+a.height,b.y+b.height);return(d-c)*(f-e)}function p(a,b){var c=a[b];return a.filter(function(a,c){return b!==c}).filter(function(a){return n(a,c)})}function q(a,c){var d=a[c],e=p(a,c);return b.sum(e.map(function(a){return o(d,a)}))}function r(a){return b.sum(a.map(function(b,c){return q(a,c)}))}function s(a){return a[t(a)]}function t(a){return Math.floor(Math.random()*a.length)}function u(a,b,c){var d=a.slice();return d[b]=c,d}function v(a){var b=a.x,c=a.y,d=a.width,e=a.height;return[w(b,c,d,e),w(b-d,c,d,e),w(b-d,c-e,d,e),w(b,c-e,d,e),w(b,c-e/2,d,e),w(b-d/2,c,d,e),w(b-d,c-e/2,d,e),w(b-d/2,c-e,d,e)]}function w(a,b,c,d){return{x:a,y:b,width:c,height:d}}function x(){var a=null,b=null,c=function(c){return null==a&&null==b||!(c.x<0||c.y<0||c.x>a||c.y>b||c.x+c.width>a||c.y+c.height>b)};return c.containerWidth=function(b){return arguments.length?(a=b,c):a},c.containerHeight=function(a){return arguments.length?(b=a,c):b},c}function y(){function a(a,b){var c=t(a),d=a[c],e=v(d),f=s(e);return u(b,c,f)}function c(a){for(var b=r(a),c=1,e=0;e<a.length;e++){var f=a[e];c+=d(f)?0:100}return b*c}var d=x(),e=1e3,f=1,g=function(b){for(var d=b,g=b,h=1/0,i=e;i>0;){var j=a(d,g),k=c(j),l=Math.exp((h-k)/i);(h>k||l>Math.random())&&(g=j,h=k),i-=f}return g};return g.temperature=function(a){return arguments.length?(e=a,g):e},g.cooling=function(a){return arguments.length?(f=a,g):f},b.rebind(g,d,"containerWidth"),b.rebind(g,d,"containerHeight"),g}function z(a,b){return a.map(function(a){return[b(a),a]}).reduce(function(a,b){return a[0]>b[0]?b:a},[Number.MAX_VALUE,null])[1]}function A(){function a(a,b){return b.map(function(a,b){return[a,b]}).filter(function(a,d){return p(b,a[1]).length||!c(a[0])}).forEach(function(d){var e=v(a[d[1]]),f=e.map(function(a){return u(b,d[1],a)}),g=z(f,function(a){var b=q(a,d[1]),e=c(a[d[1]]);return b+(e?0:Number.MAX_VALUE)});b=g}),b}var c=x(),d=1,e=function(b){for(var c=b,e=b,f=Number.MAX_VALUE,g=1/0,h=0;d>h&&g>f;)g=f,e=a(c,e),f=r(e),h++;return e};return e.iterations=function(a){return arguments.length?(d=a,e):d},b.rebind(e,c,"containerWidth"),b.rebind(e,c,"containerHeight"),e}function B(){function a(a,b){var c=a.slice();return c.push(b),c}function c(a){for(var b=r(a),c=!0,e=0;e<a.length&&c;e++){var f=a[e];c=d(f)}return b+(c?0:1/0)}var d=x(),e=function(b){var d=[];return b.forEach(function(b){var e=v(b),f=e.map(function(b){return a(d,b)});d=z(f,c)}),d};return b.rebind(e,d,"containerWidth"),b.rebind(e,d,"containerHeight"),e}function C(){var a=1,b=1,c=function(c){return c.map(function(c,d){var e=c.x,f=c.y;return e+c.width>a&&(e-=c.width),f+c.height>b&&(f-=c.height),{x:e,y:f}})};return c.containerWidth=function(b){return arguments.length?(a=b,c):a},c.containerHeight=function(a){return arguments.length?(b=a,c):b},c}function D(a){var c=a.map(function(a){return b.functor(a)});return function(a,b){return c.map(function(c){return c(a,b)})}}function E(a,c,d){return"object"!=typeof d?b.rebind.apply(b,arguments):(Object.keys(d).forEach(function(b){var e=c[d[b]];if("function"!=typeof e)throw new Error("The method "+d[b]+" does not exist on the source object");a[b]=function(){var b=e.apply(c,arguments);return b===c?a:b}}),a)}function F(a){return a[0].toUpperCase()+a.slice(1)}function G(a,b,c,d){function e(a){return d.some(function(b){return a.match(b)})}function f(a){return""!==c?c+F(a):a}c="undefined"!=typeof c?c:"",4===arguments.length&&Array.isArray(d)||(d=Array.prototype.slice.call(arguments,3)),d=d.map(function(a){if("string"==typeof a){if(!b.hasOwnProperty(a))throw new Error("The method "+a+" does not exist on the source object");a=new RegExp("^"+a+"$")}return a});var g={};for(var h in b)b.hasOwnProperty(h)&&!e(h)&&(g[f(h)]=h);E(a,b,g)}function H(a){return a.rangeExtent}function I(a){if(!H(a))return a.range();var b=a.range(),c=a.rangeExtent();if(b.length<=1)return c;var d=b[0]>b[1];return d?[c[1],c[0]]:c}function J(a,b){H(a)?a.rangePoints(b,1):a.range(b)}function K(){return this}function L(a){return a}function M(a,b){return b}function N(a){}function O(){var a=arguments;return function(b,c){for(var d=0,e=a.length;e>d;d++)if(null==a[d](b,c))return!1;return!0}}function P(){var a="g",c=!1,d="g",e={},f=M,g=function(g,h){var i=h||L;g.selectAll&&g.node||(g=b.select(g));var j=g.selectAll(a);c&&(j=j.filter(function(){return this.parentNode===g.node()}));var k=j.data(i,f),l=k.enter().insert(d).attr(e).style("opacity",Db),m=b.transition(k.exit()).style("opacity",Db).remove();return k=b.transition(k).style("opacity",1),k.enter=b.functor(l),k.exit=b.functor(m),k};return g.selector=function(b){return arguments.length?(a=b,g):a},g.children=function(a){return arguments.length?(c=a,g):c},g.element=function(a){return arguments.length?(d=a,g):d},g.attr=function(a){if(!arguments.length)return e;if(1===arguments.length)e=arguments[0];else if(2===arguments.length){var b=arguments[0],c=arguments[1];e[b]=c}return g},g.key=function(a){return arguments.length?(f=a,g):f},g}function Q(a){var c=b.functor([0,0]),d=function(a,b){return[a.x,a.y]},e=b.scale.identity(),f=b.scale.identity(),g=N,h=a||L,i=N,j=P().selector("g.rectangle").element("g").attr("class","rectangle"),k=function(a){var b=I(e),k=I(f);h.containerWidth&&h.containerWidth(Math.max(b[0],b[1])),h.containerHeight&&h.containerHeight(Math.max(k[0],k[1])),a.each(function(a,b){var e=j(this,a),f=a.map(function(a,b){var e=d(a,b),f=c(a,b);return{x:e[0],y:e[1],width:f[0],height:f[1]}}),k=h(f);e.attr("transform",function(a,b){var c=k[b];return"translate("+c.x+", "+c.y+")"}),a.forEach(function(a,b){var c=d(a,b),e=[c[0]-k[b].x,c[1]-k[b].y];g(a,b,e)}),e.attr({"layout-width":function(a,b){return f[b].width},"layout-height":function(a,b){return f[b].height}}),e.call(i)})};return G(k,h),k.size=function(a){return arguments.length?(c=D(a),k):c},k.position=function(a){return arguments.length?(d=D(a),k):d},k.anchor=function(a){return arguments.length?(g=a,k):g},k.xScale=function(a){return arguments.length?(e=a,k):e},k.yScale=function(a){return arguments.length?(f=a,k):f},k.component=function(a){return arguments.length?(i=a,k):i},k}function R(a){var b=null;return function(){null==b&&(b=requestAnimationFrame(function(){b=null,a()}))}}function S(a,b){return function(a,b){return{x:a,y:b}}}function T(a,b,c,d,e,f){return f=f||function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},function(g,h){var i=e.map(function(e){var i=f(g,h,a(c(e)),b(d(e)));return[i,e]}).reduce(function(a,b){return a[0]>b[0]?b:a},[Number.MAX_VALUE,null])[1];return{datum:i,x:i?a(c(i)):g,y:i?b(d(i)):h}}}function U(a,b,c){return function(d,e){var f=a.xScale(),g=a.yScale(),h=a.xValue(),i=(a.yValue||a.yCloseValue).call(a);return T(f,g,h,i,b,c)(d,e)}}function V(a,b){function c(a,b,c,d){var e=a-c;return Math.abs(e)}return U(a,b,c)}function W(a,b){function c(a,b,c,d){var e=b-d;return Math.abs(e)}return U(a,b,c)}function X(a){return function(c){if(c.length<=1)return 10;c.sort();var d=b.pairs(c).map(function(a){return Math.abs(a[0]-a[1])}),e=b.min(d);return a*e}}function Y(){var a=[],c=null,d="percent",e=0,f=null,g=function(g){Array.isArray(g[0])||(g=[g]),a=a.map(function(a){return"string"!=typeof a?a:function(b){return b[a]}});var h=b.min(g,function(c){return b.min(c,function(c){return b.min(a.map(function(a){return a(c)}))})}),i=b.max(g,function(c){return b.max(c,function(c){return b.max(a.map(function(a){return a(c)}))})}),j="[object Date]"===Object.prototype.toString.call(h),k=j?h.getTime():h,l=j?i.getTime():i;if(null!=f){var m=j?f.getTime():f,n=Math.abs(l-m),o=Math.abs(k-m),p=Math.max(n,o);k=m-p,l=m+p}if("domain"===d)Array.isArray(e)?(k-=e[0],l+=e[1]):(k-=e,l+=e);else if("percent"===d)if(Array.isArray(e)){var q=[e[0]*(l-k),e[1]*(l-k)];k-=q[0],l+=q[1]}else{var r=e*(l-k)/2;k-=r,l+=r}return null!==c&&(k>c?k=c:c>l&&(l=c)),j&&(k=new Date(k),l=new Date(l)),[k,l]};return g.fields=function(b){return arguments.length?(Array.isArray(b)||(b=[b]),a=b,g):a},g.include=function(a){return arguments.length?(c=a,g):c},g.padUnit=function(a){return arguments.length?(d=a,g):d},g.pad=function(a){return arguments.length?(e=a,g):e},g.symmetricalAbout=function(a){return arguments.length?(f=a,g):f},g}function Z(a){var b=a;return"number"==typeof b&&(b={top:a,bottom:a,left:a,right:a}),["top","bottom","left","right"].forEach(function(a){b[a]||(b[a]=0)}),b}function $(){function a(){var a=b.select(this),c=a.datum()[0];if("DONE"!==c.state){var d=b.mouse(this),e=j.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function c(){var c=b.select(this).on("click.measure",f).on("mousemove.measure",d).on("mouseleave.measure",e),g=c.datum();null==g[0]&&g.push({state:"SELECT_SOURCE"}),a.call(this),c.call(r)}function d(){var c=b.select(this);a.call(this),c.call(r)}function e(){var a=b.select(this),c=a.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),a.on("click.measure",null).on("mousemove.measure",null).on("mouseleave.measure",null)}function f(){var c=b.select(this),d=c.datum()[0];switch(d.state){case"SELECT_SOURCE":a.call(this),g.measuresource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":a.call(this),g.measuretarget.apply(this,arguments),d.state="DONE";break;case"DONE":g.measureclear.apply(this,arguments),d.state="SELECT_SOURCE",a.call(this);break;default:throw new Error("Unknown state "+d.state)}c.call(r)}var g=b.dispatch("measuresource","measuretarget","measureclear"),h=b.time.scale(),i=b.scale.linear(),j=function(a,b){return S(h,i)(a,b)},k=N,l=b.functor(""),m=b.functor(""),n=b.functor(2),o=function(a){return a.x},p=function(a){return a.y},q=P().selector("g.measure").element("g").attr("class","measure"),r=function(a){a.each(function(a,d){var e=b.select(this).style("pointer-events","all").on("mouseenter.measure",c),f=e.selectAll("rect").data([a]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",h.range()[0]).attr("y",i.range()[1]).attr("width",h.range()[1]).attr("height",i.range()[0]);var g=q(e,a),j=g.enter();j.append("line").attr("class","tangent"),j.append("line").attr("class","horizontal"),j.append("line").attr("class","vertical"),j.append("text").attr("class","horizontal"),j.append("text").attr("class","vertical"),g.select("line.tangent").attr("x1",function(a){return o(a.source)}).attr("y1",function(a){return p(a.source)}).attr("x2",function(a){return o(a.target)}).attr("y2",function(a){return p(a.target)}),g.select("line.horizontal").attr("x1",function(a){return o(a.source)}).attr("y1",function(a){return p(a.source)}).attr("x2",function(a){return o(a.target)}).attr("y2",function(a){return p(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.vertical").attr("x1",function(a){return o(a.target)}).attr("y1",function(a){return p(a.target)}).attr("x2",function(a){return o(a.target)}).attr("y2",function(a){return p(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"});var r=n.apply(this,arguments);g.select("text.horizontal").attr("x",function(a){return o(a.source)+(o(a.target)-o(a.source))/2}).attr("y",function(a){return p(a.source)-r}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(l),g.select("text.vertical").attr("x",function(a){return o(a.target)+r}).attr("y",function(a){return p(a.source)+(p(a.target)-p(a.source))/2}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(m),k(g,a,d)})};return r.xScale=function(a){return arguments.length?(h=a,r):h},r.yScale=function(a){return arguments.length?(i=a,r):i},r.snap=function(a){return arguments.length?(j=a,r):j},r.decorate=function(a){return arguments.length?(k=a,r):k},r.xLabel=function(a){return arguments.length?(l=b.functor(a),r):l},r.yLabel=function(a){return arguments.length?(m=b.functor(a),r):m},r.padding=function(a){return arguments.length?(n=b.functor(a),r):n},b.rebind(r,g,"on"),r}function _(){var a=0,c=N,d=N,e=P().selector("g.container").element("g").attr({"class":"container","layout-style":"flex: 1"}),f=function(f){f.each(function(f,g){var h=Z(a),i=e(this,[f]);i.enter().append("rect").layout("flex",1),i.enter().append("g").layout({position:"absolute",top:h.top,left:h.left,bottom:h.bottom,right:h.right}),b.select(this).layout(),i.select("g").call(c),d(i,f,g)})};return f.decorate=function(a){return arguments.length?(d=a,f):d},f.padding=function(b){return arguments.length?(a=b,f):a},f.component=function(a){return arguments.length?(c=a,f):c},f}function aa(){function a(){var a=b.select(this),c=a.datum()[0];if("DONE"!==c.state){var d=b.mouse(this),e=j.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function c(){var c=b.select(this).on("click.fan",f).on("mousemove.fan",d).on("mouseleave.fan",e),g=c.datum();null==g[0]&&g.push({state:"SELECT_SOURCE"}),a.call(this),c.call(o)}function d(){var c=b.select(this);a.call(this),c.call(o)}function e(){var a=b.select(this),c=a.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),a.on("click.fan",null).on("mousemove.fan",null).on("mouseleave.fan",null)}function f(){var c=b.select(this),d=c.datum()[0];switch(d.state){case"SELECT_SOURCE":a.call(this),g.fansource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":a.call(this),g.fantarget.apply(this,arguments),d.state="DONE";break;case"DONE":g.fanclear.apply(this,arguments),d.state="SELECT_SOURCE",a.call(this);break;default:throw new Error("Unknown state "+d.state)}c.call(o)}var g=b.dispatch("fansource","fantarget","fanclear"),h=b.time.scale(),i=b.scale.linear(),j=function(a,b){return S(h,i)(a,b)},k=N,l=function(a){return a.x},m=function(a){return a.y},n=P().selector("g.fan").element("g").attr("class","fan"),o=function(a){a.each(function(a,d){var e=b.select(this).style("pointer-events","all").on("mouseenter.fan",c),f=e.selectAll("rect").data([a]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",h.range()[0]).attr("y",i.range()[1]).attr("width",h.range()[1]).attr("height",i.range()[0]);var g=n(e,a);g.each(function(a){if(a.x=h.range()[1],a.ay=a.by=a.cy=m(a.target),l(a.source)!==l(a.target)){if("DONE"===a.state&&l(a.source)>l(a.target)){var b=a.source;a.source=a.target,a.target=b}var c=(m(a.target)-m(a.source))/(l(a.target)-l(a.source)),d=a.x-l(a.source),e=c*d;a.ay=.618*e+m(a.source),a.by=.5*e+m(a.source),a.cy=.382*e+m(a.source)}});var j=g.enter();j.append("line").attr("class","trend"),j.append("line").attr("class","a"),j.append("line").attr("class","b"),j.append("line").attr("class","c"),j.append("polygon").attr("class","area"),g.select("line.trend").attr("x1",function(a){return l(a.source)}).attr("y1",function(a){return m(a.source)}).attr("x2",function(a){return l(a.target)}).attr("y2",function(a){return m(a.target)}),g.select("line.a").attr("x1",function(a){return l(a.source)}).attr("y1",function(a){return m(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.ay}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.b").attr("x1",function(a){return l(a.source)}).attr("y1",function(a){return m(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.by}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.c").attr("x1",function(a){return l(a.source)}).attr("y1",function(a){return m(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("polygon.area").attr("points",function(a){return l(a.source)+","+m(a.source)+" "+a.x+","+a.ay+" "+a.x+","+a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),k(g,a,d)})};return o.xScale=function(a){return arguments.length?(h=a,o):h},o.yScale=function(a){return arguments.length?(i=a,o):i},o.snap=function(a){return arguments.length?(j=a,o):j},o.decorate=function(a){return arguments.length?(k=a,o):k},b.rebind(o,g,"on"),o}function ba(){var a=b.time.scale(),c=b.scale.linear(),d=[],e=K,f=M,g=N,h=P().selector("g.multi").children(!0).attr("class","multi").element("g").key(function(a,b){var c=this.__series__||a;return f.call(this,c,b)}),i=function(f){f.each(function(f){var i=h(this,d);i.each(function(d,g){this.__series__=d,(d.xScale||d.x).call(d,a),(d.yScale||d.y).call(d,c),b.select(this).datum(e.call(f,d,g)).call(d)}),b.selection.prototype.order.call(i),g(i)})};return i.xScale=function(b){return arguments.length?(a=b,i):a},i.yScale=function(a){return arguments.length?(c=a,i):c},i.series=function(a){return arguments.length?(d=a,i):d},i.mapping=function(a){return arguments.length?(e=a,i):e},i.key=function(a){return arguments.length?(f=a,i):f},i.decorate=function(a){return arguments.length?(g=a,i):g},i}function ca(){var a=b.time.scale(),c=b.scale.linear(),d=L,e=M,f=d,g=N,h="horizontal",i=P().selector("g.annotation").element("g"),j=function(e){e.each(function(e,j){var k,l,m,n,o,p,q={x:-5,y:-5};switch(h){case"horizontal":m=function(a,b){return"translate("+a+", "+b+")"},n="x2",l=a,k=c,o="left-handle",p="right-handle";break;case"vertical":m=function(a,b){return"translate("+b+", "+a+")"},n="y2",l=c,k=a,q.transform="rotate(-90)",o="bottom-handle",p="top-handle";break;default:throw new Error("Invalid orientation")}var r=I(l),s=function(a){var b=k(d(a));return m(r[0],b)},t=r[1]-r[0],u=b.select(this);i.attr("class","annotation "+h);var v=i(u,e),w=v.enter().attr("transform",s);w.append("line").attr(n,t),w.append("g").classed(o,!0),w.append("g").classed(p,!0).attr("transform",m(t,0)).append("text").attr(q),v.attr("transform",s),v.select("line").attr(n,t),v.select("g."+p).attr("transform",m(t,0)),v.select("text").text(f),g(v,e,j)})};return j.xScale=function(b){return arguments.length?(a=b,j):a},j.yScale=function(a){return arguments.length?(c=a,j):c},j.value=function(a){return arguments.length?(d=b.functor(a),j):d},j.keyValue=function(a){return arguments.length?(e=b.functor(a),j):e},j.label=function(a){return arguments.length?(f=b.functor(a),j):f},j.decorate=function(a){return arguments.length?(g=a,j):g},j.orient=function(a){return arguments.length?(h=a,j):h},j}function da(){function a(){}var c=b.time.scale(),d=b.scale.linear(),e=b.functor(0),f=b.functor(0),g=function(a,b){return a.date},h=function(a,b){return a.close};return a.x0=function(a,b){return c(f(a,b))},a.y0=function(a,b){return d(e(a,b))},a.x=a.x1=function(a,b){return c(g(a,b))},a.y=a.y1=function(a,b){return d(h(a,b))},a.defined=function(a,b){return O(f,e,g,h)(a,b)},a.xScale=function(b){return arguments.length?(c=b,a):c},a.yScale=function(b){return arguments.length?(d=b,a):d},a.x0Value=function(c){return arguments.length?(f=b.functor(c),a):f},a.y0Value=function(c){return arguments.length?(e=b.functor(c),a):e},a.xValue=a.x1Value=function(c){return arguments.length?(g=b.functor(c),a):g},a.yValue=a.y1Value=function(c){return arguments.length?(h=b.functor(c),a):h},a}function ea(){var a=N,c=b.svg.symbol(),d=da(),e=P().selector("g.point").element("g").attr("class","point"),f=function(a,b){return"translate("+d.x(a,b)+", "+d.y(a,b)+")"},g=function(b){b.each(function(b,g){var h=b.filter(d.defined),i=e(this,h);i.enter().attr("transform",f).append("path"),i.attr("transform",f).select("path").attr("d",c),a(i,b,g)})};return g.decorate=function(b){return arguments.length?(a=b,g):a},b.rebind(g,d,"xScale","xValue","yScale","yValue"),b.rebind(g,e,"key"),b.rebind(g,c,"size","type"),g}function fa(){function a(a){return b.scale.identity().range(I(a))}function c(){var a=b.mouse(this),c=b.select(this),d=i.apply(this,a),e=c.datum();e.push(d),c.call(q),f.trackingstart.apply(this,arguments)}function d(){var a=b.mouse(this),c=b.select(this),d=i.apply(this,a),e=c.datum();e[e.length-1]=d,c.call(q),f.trackingmove.apply(this,arguments)}function e(){var a=b.select(this),c=a.datum();c.pop(),a.call(q),f.trackingend.apply(this,arguments)}var f=b.dispatch("trackingstart","trackingmove","trackingend"),g=b.time.scale(),h=b.scale.linear(),i=function(a,b){return S(g,h)(a,b)},j=N,k=function(a){return a.x},l=function(a){return a.y},m=P().children(!0).selector("g.crosshair").element("g").attr("class","crosshair"),n=ea().xValue(k).yValue(l),o=ca().value(l).label(function(a){return a.y}),p=ca().orient("vertical").value(k).label(function(a){return a.x}),q=function(f){f.each(function(f,i){var k=b.select(this).style("pointer-events","all").on("mouseenter.crosshair",c).on("mousemove.crosshair",d).on("wheel.crosshair",d).on("mouseleave.crosshair",e),l=k.selectAll("rect").data([f]);l.enter().append("rect").style("visibility","hidden"),k.select("rect").attr("x",I(g)[0]).attr("y",I(h)[1]).attr("width",I(g)[1]).attr("height",I(h)[0]);var q=m(k,f);q.enter().style("pointer-events","none");var r=ba().series([o,p,n]).xScale(a(g)).yScale(a(h)).mapping(function(){return[this]});q.call(r),j(q,f,i)})};return q.xScale=function(a){return arguments.length?(g=a,q):g},q.yScale=function(a){return arguments.length?(h=a,q):h},q.snap=function(a){return arguments.length?(i=a,q):i},q.decorate=function(a){return arguments.length?(j=a,q):j},b.rebind(q,f,"on"),E(q,o,{yLabel:"label"}),E(q,p,{xLabel:"label"}),q}function ga(){var a=function(a,b){return a.value},c=function(a,b){return a.median},d=function(a,b){return a.upperQuartile},e=function(a,b){return a.lowerQuartile},f=function(a,b){return a.high},g=function(a,b){return a.low},h="vertical",i=b.functor(5),j=b.functor(.5),k=function(b){return b.map(function(b,k){var l=a(b,k),m=i(b,k),n=m/2,o=m*j(b,k),p=o/2,q=f(b,k),r=d(b,k),s=c(b,k),t=e(b,k),u=g(b,k),v=r-q,w=s-r,x=t-r,y=t-s,z=u-t;return"vertical"===h?"M"+l+","+q+"h"+-p+"h"+o+"h"+-p+"v"+v+"h"+-n+"v"+x+"h"+m+"v"+-x+"h"+-n+"m"+-n+","+w+"h"+m+"m"+-n+","+y+"v"+z+"h"+-p+"h"+o+"h"+-p:"M"+u+","+l+"v"+-p+"v"+o+"v"+-p+"h"+-z+"v"+-n+"h"+-x+"v"+m+"h"+x+"v"+-n+"m"+-y+","+-n+"v"+m+"m"+-w+","+-n+"h"+-v+"v"+-p+"v"+o+"v"+-p}).join("")};return k.value=function(c){return arguments.length?(a=b.functor(c),k):a},k.median=function(a){return arguments.length?(c=b.functor(a),k):c},k.upperQuartile=function(a){return arguments.length?(d=b.functor(a),k):d},k.lowerQuartile=function(a){return arguments.length?(e=b.functor(a),k):e},k.high=function(a){return arguments.length?(f=b.functor(a),k):f},k.low=function(a){return arguments.length?(g=b.functor(a),k):g},k.width=function(a){return arguments.length?(i=b.functor(a),k):i},k.orient=function(a){return arguments.length?(h=a,k):h},k.cap=function(a){return arguments.length?(j=b.functor(a),k):j},k}function ha(){var a=function(a,b){return a.x},c=function(a,b){return a.high},d=function(a,b){return a.low},e="vertical",f=b.functor(5),g=function(b){return b.map(function(b,g){var h=a(b,g),i=f(b,g),j=i/2,k=c(b,g),l=d(b,g),m=k-l;return"vertical"===e?"M"+h+","+k+"h"+-j+"h"+i+"h"+-j+"v"+-m+"h"+-j+"h"+i+"h"+-j:"M"+l+","+h+"v"+-j+"v"+i+"v"+-j+"h"+m+"v"+-j+"v"+i+"v"+-j}).join("")};return g.value=function(c){return arguments.length?(a=b.functor(c),g):a},g.high=function(a){return arguments.length?(c=b.functor(a),g):c},g.low=function(a){return arguments.length?(d=b.functor(a),g):d},g.width=function(a){return arguments.length?(f=b.functor(a),g):f},g.orient=function(a){return arguments.length?(e=a,g):e},g}function ia(){var a=function(a,b){return a.date},c=function(a,b){return a.open},d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.close},g=b.functor(3),h=function(b){return b.map(function(b,h){var i=a(b,h),j=c(b,h),k=d(b,h),l=e(b,h),m=f(b,h),n=g(b,h)/2,o="M"+i+","+l,p="V"+k,q="M"+i+","+j+"h"+-n,r="M"+i+","+m+"h"+n;return o+p+q+r}).join("")};return h.x=function(c){return arguments.length?(a=b.functor(c),h):a},h.open=function(a){return arguments.length?(c=b.functor(a),h):c},h.high=function(a){return arguments.length?(d=b.functor(a),h):d},h.low=function(a){return arguments.length?(e=b.functor(a),h):e},h.close=function(a){return arguments.length?(f=b.functor(a),h):f},h.width=function(a){return arguments.length?(g=b.functor(a),h):g},h}function ja(){var a=function(a,b){return a.date},c=function(a,b){return a.open},d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.close},g=b.functor(3),h=function(b){return b.map(function(b,h){var i=a(b,h),j=c(b,h),k=d(b,h),l=e(b,h),m=f(b,h),n=g(b,h),o="M"+(i-n/2)+","+j+"h"+n+"V"+m+"h"+-n+"V"+j+"z",p="M"+i+","+Math.min(m,j)+"V"+k,q="M"+i+","+Math.max(m,j)+"V"+l;return o+p+q}).join("")};return h.x=function(c){return arguments.length?(a=b.functor(c),h):a},h.open=function(a){return arguments.length?(c=b.functor(a),h):c},h.high=function(a){return arguments.length?(d=b.functor(a),h):d},h.low=function(a){return arguments.length?(e=b.functor(a),h):e},h.close=function(a){return arguments.length?(f=b.functor(a),h):f},h.width=function(a){return arguments.length?(g=b.functor(a),h):g},h}function ka(){var a=function(a,b){return a.x},c=function(a,b){return a.y},d="center",e="center",f=function(a,b){return a.height},g=b.functor(3),h=function(b,h){return b.map(function(b,i){var j,k=a.call(this,b,h||i),l=c.call(this,b,h||i),m=f.call(this,b,h||i),n=g.call(this,b,h||i);switch(d){case"left":j=n;break;case"right":j=0;break;case"center":j=n/2;break;default:throw new Error("Invalid horizontal alignment "+d)}var o;switch(e){case"bottom":o=-m;break;case"top":o=0;break;case"center":o=m/2;break;default:throw new Error("Invalid vertical alignment "+e)}var p="M"+(k-j)+","+(l-o)+"h"+n+"v"+m+"h"+-n+"z";return p},this).join("")};return h.x=function(c){return arguments.length?(a=b.functor(c),h):a},h.y=function(a){return arguments.length?(c=b.functor(a),h):c},h.width=function(a){return arguments.length?(g=b.functor(a),h):g},h.horizontalAlign=function(a){return arguments.length?(d=a,h):d},h.height=function(a){return arguments.length?(f=b.functor(a),h):f},h.verticalAlign=function(a){return arguments.length?(e=a,h):e},h}function la(){function a(a,b){return c[a]?c[a].apply(c,d):b}var c=b.scale.identity(),d=[10],e=null,f=function(){return null==e?a("ticks",c.domain()):e};return f.scale=function(a){return arguments.length?(c=a,f):c},f.ticks=function(a){return arguments.length?(d=arguments,f):d},f.tickValues=function(a){return arguments.length?(e=a,f):e},f}function ma(){function a(a,b){return function(c){return b(a(c),0)}}function c(a,b){return e()?"translate("+b+", "+a+")":"translate("+a+", "+b+")"}function d(a){return e()?a.map(function(a){return[a[1],a[0]]}):a}function e(){return"left"===h||"right"===h}function f(a,b){var c=n.scale();return c[a]?c[a].apply(c,n.ticks()):b}var g=N,h="bottom",i=null,j=6,k=6,l=3,m=b.svg.line(),n=la(),o=P().selector("g.tick").element("g").key(L).attr("class","tick"),p=P().selector("path.domain").element("path").attr("class","domain"),q=function(e){e.each(function(e,q){var r=n.scale(),s=this.__chart__||r;this.__chart__=r.copy();var t=n(),u=null==i?f("tickFormat",L):i,v="bottom"===h||"right"===h?1:-1,w=b.select(this),x=I(r),y=d([[x[0],v*j],[x[0],0],[x[1],0],[x[1],v*j]]),z=p(w,[e]);z.attr("d",m(y)),o.attr({transform:a(H(r)?r:s,c)});var A=o(w,t);A.enter().append("path");var B=v*(k+l);A.enter().append("text").attr("transform",c(0,B)),A.attr("class","tick orient-"+h),A.attr("transform",a(r,c)),A.select("path").attr("d",function(a){return m(d([[0,0],[0,v*k]]))}),A.select("text").attr("transform",c(0,B)).text(u),H(r)||A.exit().attr("transform",a(r,c)),g(A,e,q)})};return q.tickFormat=function(a){return arguments.length?(i=a,q):i},q.tickSize=function(a){var b=arguments.length;return b?(k=Number(a),j=Number(arguments[b-1]),q):k},q.innerTickSize=function(a){return arguments.length?(k=Number(a),q):k},q.outerTickSize=function(a){return arguments.length?(j=Number(a),q):j},q.tickPadding=function(a){return arguments.length?(l=a,q):l},q.orient=function(a){return arguments.length?(h=a,q):h},q.decorate=function(a){return arguments.length?(g=a,q):g},G(q,n),q}function na(){var a="",b=function(a){return a.y},c=!1,d=function(a,b,c){return b===c.length-1?"Final":void 0},e={up:"up",down:"down",unchanged:"unchanged"},f=function(f){var g,h,i,j=f.length,k=0,l=0,m=[];for(c&&(l=b(f[0]),m.push({x:f[0][a],y0:0,y1:l,direction:e.unchanged}),k=1),k;j>k;k+=1)g=l,h=b(f[k])+l,m.push({x:f[k][a],y0:g,y1:h,direction:h-g>0?e.up:e.down}),i=d(f[k],k,f),i&&m.push({x:i,y0:0,y1:h,direction:e.unchanged}),l=h;return m};return f.xValueKey=function(b){return arguments.length?(a=b,f):a},f.yValue=function(a){return arguments.length?(b=a,f):b},f.total=function(a){return arguments.length?(d=a,f):d},f.startsWithTotal=function(a){return arguments.length?(c=a,f):c},f}function oa(){function a(a,b){return"vertical"===i?"translate("+k.x1(a,b)+", "+k.y0(a,b)+")":"translate("+k.x0(a,b)+", "+k.y1(a,b)+")"}function c(a,b){return"vertical"===i?k.y1(a,b)-k.y0(a,b):k.x1(a,b)-k.x0(a,b)}function d(a){return"vertical"===i?a.height:a.width}function e(a){return"vertical"===i?a.width:a.height}function f(){return"vertical"===i?k.x:k.y}var g=N,h=X(.75),i="vertical",j=ka(),k=da().xValue(function(a,b){return"vertical"===i?a.date:a.close;
}).yValue(function(a,b){return"vertical"===i?a.close:a.date}),l=P().selector("g.bar").element("g"),m=function(b){b.each(function(b,m){if("vertical"!==i&&"horizontal"!==i)throw new Error("The bar series does not support an orientation of "+i);l.attr("class","bar "+i);var n=b.filter(k.defined);j.x(0).y(0).width(0).height(0),"vertical"===i?j.verticalAlign("top"):j.horizontalAlign("right");var o=h(n.map(f()));e(j)(o);var p=l(this,n);p.enter().attr("transform",a).append("path").attr("d",function(a){return j([a])}),d(j)(c),p.attr("transform",a).select("path").attr("d",function(a){return j([a])}),g(p,n,m)})};return m.decorate=function(a){return arguments.length?(g=a,m):g},m.barWidth=function(a){return arguments.length?(h=b.functor(a),m):h},m.orient=function(a){return arguments.length?(i=a,m):i},b.rebind(m,k,"xScale","xValue","x1Value","x0Value","yScale","yValue","y1Value","y0Value"),b.rebind(m,l,"key"),m}function pa(){function a(){return"vertical"===b.orient()}var b=oa(),c=function(c){b.xValue(function(b,c){return a()?b.x:b.y1}).yValue(function(b,c){return a()?b.y1:b.x}).x0Value(function(b,c){return a()?0:b.y0}).y0Value(function(b,c){return a()?b.y0:0}).decorate(function(a,c,d){a.enter().attr("class","waterfall "+b.orient()).classed("up",function(a){return"up"===a.direction}).classed("down",function(a){return"down"===a.direction})}),b(c)};return G(c,b),c}function qa(){var a=b.time.scale(),c=b.scale.linear(),d=function(a,b){return(a.close+a.high)/2},e=function(a,b){return(a.close+a.low)/2},f=function(a,b){return a.high},g=function(a,b){return a.low},h=function(a,b){return a.date},i=function(a,b){return a.close},j="vertical",k=X(.5),l=N,m=P().selector("g.box-plot").element("g").attr("class","box-plot"),n=ga().value(0),o=function(o){o.each(function(o,p){var q=o.filter(O(g,f,e,d,h,i)),r=m(this,q);r.enter().append("path");var s="vertical"===j?a:c,t=k(q.map(function(a,b){return s(h(a,b))}));n.orient(j).width(t),r.each(function(k,l){var m,o,p,q,r,s;if("vertical"===j){var t=c(f(k,l));m=a(h(k,l))+","+t,r=0,p=c(d(k,l))-t,o=c(i(k,l))-t,q=c(e(k,l))-t,s=c(g(k,l))-t}else{var u=a(g(k,l));m=u+","+c(h(k,l)),r=a(f(k,l))-u,p=a(d(k,l))-u,o=a(i(k,l))-u,q=a(e(k,l))-u,s=0}n.median(o).upperQuartile(p).lowerQuartile(q).high(r).low(s),b.select(this).attr("transform","translate("+m+")").select("path").attr("d",n([k]))}),l(r,o,p)})};return o.orient=function(a){return arguments.length?(j=a,o):j},o.xScale=function(b){return arguments.length?(a=b,o):a},o.yScale=function(a){return arguments.length?(c=a,o):c},o.lowerQuartile=function(a){return arguments.length?(e=b.functor(a),o):e},o.upperQuartile=function(a){return arguments.length?(d=b.functor(a),o):d},o.low=function(a){return arguments.length?(g=b.functor(a),o):g},o.high=function(a){return arguments.length?(f=b.functor(a),o):f},o.value=function(a){return arguments.length?(h=b.functor(a),o):h},o.median=function(a){return arguments.length?(i=b.functor(a),o):i},o.barWidth=function(a){return arguments.length?(k=b.functor(a),o):k},o.decorate=function(a){return arguments.length?(l=a,o):l},b.rebind(o,m,"key"),b.rebind(o,n,"cap"),o}function ra(){var a=b.time.scale(),c=b.scale.linear(),d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.date},g="vertical",h=X(.5),i=N,j=P().selector("g.errorBar").element("g").attr("class","errorBar"),k=ha().value(0),l=function(l){l.each(function(l,m){var n=l.filter(O(e,d,f,f)),o=j(this,n);o.enter().append("path");var p="vertical"===g?a:c,q=h(n.map(function(a,b){return p(f(a,b))}));k.orient(g).width(q),o.each(function(h,i){var j,l,m;if("vertical"===g){var n=c(d(h,i));j=a(f(h,i))+","+n,l=0,m=c(e(h,i))-n}else{var o=a(e(h,i));j=o+","+c(f(h,i)),l=a(d(h,i))-o,m=0}k.high(l).low(m),b.select(this).attr("transform","translate("+j+")").select("path").attr("d",k([h]))}),i(o,l,m)})};return l.orient=function(a){return arguments.length?(g=a,l):g},l.xScale=function(b){return arguments.length?(a=b,l):a},l.yScale=function(a){return arguments.length?(c=a,l):c},l.low=function(a){return arguments.length?(e=b.functor(a),l):e},l.high=function(a){return arguments.length?(d=b.functor(a),l):d},l.value=function(a){return arguments.length?(f=b.functor(a),l):f},l.barWidth=function(a){return arguments.length?(h=b.functor(a),l):h},l.decorate=function(a){return arguments.length?(i=a,l):i},b.rebind(l,j,"key"),l}function sa(){function a(){}var c=b.time.scale(),d=b.scale.linear(),e=function(a,b){return a.date},f=function(a,b){return a.open},g=function(a,b){return a.high},h=function(a,b){return a.low},i=function(a,b){return a.close},j=X(.75),k=function(a,b){return c(e(a,b))};return a.width=function(a){return j(a.map(k))},a.defined=function(a,b){return O(e,f,h,g,i)(a,b)},a.values=function(a,b){var c=i(a,b),e=f(a,b),j="";return c>e?j="up":e>c&&(j="down"),{x:k(a,b),yOpen:d(e),yHigh:d(g(a,b)),yLow:d(h(a,b)),yClose:d(c),direction:j}},a.xScale=function(b){return arguments.length?(c=b,a):c},a.yScale=function(b){return arguments.length?(d=b,a):d},a.xValue=function(b){return arguments.length?(e=b,a):e},a.yOpenValue=function(b){return arguments.length?(f=b,a):f},a.yHighValue=function(b){return arguments.length?(g=b,a):g},a.yLowValue=function(b){return arguments.length?(h=b,a):h},a.yValue=a.yCloseValue=function(b){return arguments.length?(i=b,a):i},a.barWidth=function(c){return arguments.length?(j=b.functor(c),a):j},a}function ta(){var a=oa(),c=X(.75),d=N,e=b.scale.linear(),f=b.scale.linear(),g=function(a){return a.values},h=P().selector("g.stacked").element("g").attr("class","stacked"),i=function(b,c){return e(a.xValue()(b,c))},j=function(j){j.each(function(j){var k=c(g(j[0]).map(i)),l=k/(j.length-1);a.barWidth(l);var m=k/2;f.domain([0,j.length-1]).range([-m,m]);var n=h(this,j);n.enter().append("g"),n.select("g").datum(g).each(function(c,g){var h=b.select(this),i=function(a){return e(a)+f(g)};a.xScale(i),a.decorate(function(a,b){d(a,b,g)}),h.call(a)})})};return j.decorate=function(a){return arguments.length?(d=a,j):d},j.xScale=function(a){return arguments.length?(e=a,j):e},j.values=function(a){return arguments.length?(g=a,j):g},b.rebind(j,a,"yValue","xValue","yScale"),j}function ua(){var a=N,c=function(a){return a.values},d=function(d){d.each(function(d){var e=b.select(this),f=P().selector("g.stacked").element("g").attr("class","stacked"),g=f(e,d);g.enter().append("g"),g.select("g").datum(c).call(a)})};return d.series=function(b){return arguments.length?(a=b,d):a},d.values=function(a){return arguments.length?(c=a,d):c},d}function va(){var a=N,c=da(),d=b.svg.line().defined(c.defined).x(c.x).y(c.y),e=P().selector("path.line").element("path").attr("class","line"),f=function(b){b.each(function(b,c){var f=e(this,[b]);f.attr("d",d),a(f,b,c)})};return f.decorate=function(b){return arguments.length?(a=b,f):a},b.rebind(f,c,"xScale","xValue","yScale","yValue"),b.rebind(f,e,"key"),b.rebind(f,d,"interpolate","tension"),f}function wa(){var a=va().yValue(function(a){return a.y0+a.y}),b=ua().series(a),c=function(a){a.call(b)};return G(c,a),c}function xa(){var a=oa().yValue(function(a){return a.y0+a.y}).y0Value(function(a){return a.y0}),b=ua().series(a),c=function(a){a.call(b)};return G(c,a),c}function ya(){var a=N,c=da(),d=b.svg.area().defined(c.defined).x(c.x).y0(c.y0).y1(c.y1),e=P().selector("path.area").element("path").attr("class","area"),f=function(b){b.each(function(b,c){var f=e(this,[b]);f.attr("d",d),a(f,b,c)})};return f.decorate=function(b){return arguments.length?(a=b,f):a},b.rebind(f,c,"xScale","xValue","yScale","yValue","y1Value","y0Value"),b.rebind(f,e,"key"),b.rebind(f,d,"interpolate","tension"),f}function za(){var a=ya().yValue(function(a){return a.y0+a.y}).y0Value(function(a){return a.y0}),b=ua().series(a),c=function(a){a.call(b)};return G(c,a),c}function Aa(a){function c(a){return"translate("+a.x+", "+a.yHigh+")"}var d=N,e=sa(),f=P().selector("g.ohlc").element("g").attr("class","ohlc"),g=function(a){a.each(function(a,g){var h=a.filter(e.defined),i=f(this,h);i.enter().attr("transform",function(a,b){return c(e.values(a,b))+" scale(1e-6, 1)"}).append("path");var j=ia().width(e.width(h));i.each(function(a,d){var f=e.values(a,d),g=b.transition(b.select(this)).attr({"class":"ohlc "+f.direction,transform:function(){return c(f)+" scale(1)"}});j.x(b.functor(0)).open(function(){return f.yOpen-f.yHigh}).high(function(){return f.yHigh-f.yHigh}).low(function(){return f.yLow-f.yHigh}).close(function(){return f.yClose-f.yHigh}),g.select("path").attr("d",j([a]))}),d(i,a,g)})};return g.decorate=function(a){return arguments.length?(d=a,g):d},b.rebind(g,f,"key"),G(g,e),g}function Ba(){var a=N,c=b.scale.linear(),d=b.scale.linear(),e=function(a,b){return a.date.getDay()},f=b.scale.linear(),g=va(),h=X(.75),i=P().selector("g.cycle").element("g").attr("class","cycle"),j=function(j){j.each(function(j,k){var l=b.nest().key(e).map(j),m=Object.keys(l),n=h(m.map(c)),o=n/2,p=i(this,m);p.each(function(a,e){var h=b.select(this);h.attr("transform","translate("+c(a)+", 0)"),(f.rangeBands||f.range)([-o,o]),g.xScale(f).yScale(d),b.select(this).datum(l[a]).call(g)}),a(p,m,k)})};return j.decorate=function(b){return arguments.length?(a=b,j):a},j.xScale=function(a){return arguments.length?(c=a,j):c},j.yScale=function(a){return arguments.length?(d=a,j):d},j.xValue=function(a){return arguments.length?(e=a,j):e},j.subScale=function(a){return arguments.length?(f=a,j):f},j.subSeries=function(a){return arguments.length?(g=a,j):g},j.barWidth=function(a){return arguments.length?(h=b.functor(a),j):h},b.rebind(j,i,"key"),j}function Ca(){function a(a){return"translate("+a.x+", "+a.yHigh+")"}var c=N,d=sa(),e=P().selector("g.candlestick").element("g").attr("class","candlestick"),f=function(f){f.each(function(f,g){var h=f.filter(d.defined),i=e(this,h);i.enter().attr("transform",function(b,c){return a(d.values(b,c))+" scale(1e-6, 1)"}).append("path");var j=ja().width(d.width(h));i.each(function(c,e){var f=d.values(c,e),g=b.transition(b.select(this)).attr({"class":"candlestick "+f.direction,transform:function(){return a(f)+" scale(1)"}});j.x(b.functor(0)).open(function(){return f.yOpen-f.yHigh}).high(function(){return f.yHigh-f.yHigh}).low(function(){return f.yLow-f.yHigh}).close(function(){return f.yClose-f.yHigh}),g.select("path").attr("d",j([c]))}),c(i,f,g)})};return f.decorate=function(a){return arguments.length?(c=a,f):c},b.rebind(f,e,"key"),G(f,d),f}function Da(){var a=ma(),c=b.functor(0),d=N,e=b.time.scale(),f=b.scale.linear(),g=P().selector("g.axis-adapter").element("g").attr({"class":"axis axis-adapter"}),h=function(b){b.each(function(b,i){var j,k=g(this,[b]);switch(h.orient()){case"top":case"bottom":j="translate(0,"+f(c(b))+")",a.scale(e);break;case"left":case"right":j="translate("+e(c(b))+",0)",a.scale(f);break;default:throw new Error("Invalid orientation")}k.enter().attr("transform",j),k.attr("transform",j),k.call(a),d(k,b,i)})};return h.baseline=function(a){return arguments.length?(c=b.functor(a),h):c},h.decorate=function(a){return arguments.length?(d=a,h):d},h.xScale=function(a){return arguments.length?(e=a,h):e},h.yScale=function(a){return arguments.length?(f=a,h):f},b.rebind(h,a,"orient","ticks","tickValues","tickSize","innerTickSize","outerTickSize","tickPadding","tickFormat")}function Ea(){var a={};return a.distance=function(a,b){return b.getTime()-a.getTime()},a.offset=function(a,b){return new Date(a.getTime()+b)},a.clampUp=L,a.clampDown=L,a.copy=function(){return a},a}function Fa(a,b,c){var d=a.map(function(d,e){if(e<a.length-1)return b.clampUp(d);var f=b.clampUp(d);return f<c[1]?f:b.clampDown(d)}),e=d.reduce(function(a,b){return 0===a.filter(function(a){return a.getTime()===b.getTime()}).length&&a.push(b),a},[]);return e}function Ga(a,c){function d(b){var d=a.domain(),e=a.range(),f=c.distance(d[0],d[1]),g=c.distance(d[0],b),h=g/f,i=h*(e[1]-e[0])+e[0];return i}return arguments.length||(a=b.time.scale(),c=Ea()),d.invert=function(b){var d=a.domain(),e=a.range(),f=(b-e[0])/(e[1]-e[0]),g=c.distance(d[0],d[1]),h=f*g;return c.offset(d[0],h)},d.domain=function(b){if(!arguments.length)return a.domain();var e=c.clampUp(b[0]),f=c.clampDown(b[1]);return a.domain([e,f]),d},d.nice=function(){a.nice();var b=a.domain(),e=c.clampUp(b[0]),f=c.clampDown(b[1]);return a.domain([e,f]),d},d.ticks=function(){var b=a.ticks.apply(this,arguments);return Fa(b,c,d.domain())},d.copy=function(){return Ga(a.copy(),c.copy())},d.discontinuityProvider=function(a){return arguments.length?(c=a,d):c},b.rebind(d,a,"range","rangeRound","interpolate","clamp","tickFormat")}function Ha(){return Ga()}function Ia(){function a(a){return 0===a.getDay()||6===a.getDay()}var c=864e5,d=5*c,e=7*c,f={};return f.clampDown=function(c){if(c&&a(c)){var d=0===c.getDay()?2:1,e=b.time.day.ceil(c);return b.time.day.offset(e,-d)}return c},f.clampUp=function(c){if(c&&a(c)){var d=0===c.getDay()?1:2,e=b.time.day.floor(c);return b.time.day.offset(e,d)}return c},f.distance=function(a,c){a=f.clampUp(a),c=f.clampDown(c);var g=b.time.saturday.ceil(a);if(g>c)return c.getTime()-a.getTime();var h=g.getTime()-a.getTime(),i=b.time.saturday.ceil(c),j=i.getTime()-c.getTime(),k=(i.getTime()-g.getTime())/e;return k*d+h-j},f.offset=function(c,e){var g=a(c)?f.clampUp(c):c,h=e,i=b.time.saturday.ceil(g);if(h-=i.getTime()-g.getTime(),0>h)return new Date(g.getTime()+e);g=b.time.day.offset(i,2);var j=Math.floor(h/d);return g=b.time.day.offset(g,7*j),h-=j*d,g=new Date(g.getTime()+h)},f.copy=function(){return f},f}function Ja(){var a=b.time.scale(),c=b.scale.linear(),d=function(a){return a.date},e=function(a){return a.elderRay},f=oa(),g=oa(),h=oa(),i=oa(),j=ba(),k=N,l=function(b){function l(a,b){return a*b>0&&Math.abs(a)<Math.abs(b)}f.xValue(d).yValue(function(a,b){return l(e(a).bullPower,e(a).bearPower)?void 0:e(a).bullPower}),g.xValue(d).yValue(function(a,b){return l(e(a).bearPower,e(a).bullPower)?void 0:e(a).bearPower}),h.xValue(d).yValue(function(a,b){return l(e(a).bullPower,e(a).bearPower)?e(a).bullPower:void 0}),i.xValue(d).yValue(function(a,b){return l(e(a).bearPower,e(a).bullPower)?e(a).bearPower:void 0}),j.xScale(a).yScale(c).series([f,g,h,i]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["bull","bear","bull top","bear top"][b]}),k(a,b,c)}),b.call(j)};return l.xScale=function(b){return arguments.length?(a=b,l):a},l.xValue=function(a){return arguments.length?(d=a,l):d},l.yScale=function(a){return arguments.length?(c=a,l):c},l.decorate=function(a){return arguments.length?(k=a,l):k},l}function Ka(){var a=b.time.scale(),c=b.scale.linear(),d=function(a,b){return a.close},e=function(a,b){return a.date},f=function(a){return a.envelope},g=N,h=ya().y0Value(function(a,b){return f(a).upper}).y1Value(function(a,b){return f(a).lower}),i=va().yValue(function(a,b){return f(a).upper}),j=va().yValue(function(a,b){return f(a).lower}),k=function(b){var d=ba().xScale(a).yScale(c).series([h,i,j]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi envelope "+["area","upper","lower"][b]}),g(a,b,c)});h.xValue(e),i.xValue(e),j.xValue(e),b.call(d)};return k.xScale=function(b){return arguments.length?(a=b,k):a},k.yScale=function(a){return arguments.length?(c=a,k):c},k.xValue=function(a){return arguments.length?(e=a,k):e},k.yValue=function(a){return arguments.length?(d=a,k):d},k.root=function(a){return arguments.length?(f=a,k):f},k.decorate=function(a){return arguments.length?(g=a,k):g},k}function La(){var a=b.time.scale(),c=b.scale.linear(),d=ba(),e=N,f=ca(),g=va().yValue(function(a,b){return a.force}),h=function(b){d.xScale(a).yScale(c).series([f,g]).mapping(function(a){return a===f?[0]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["annotations","indicator"][b]}),e(a,b,c)}),b.call(d)};return h.xScale=function(b){return arguments.length?(a=b,f.xScale(b),h):a},h.yScale=function(a){return arguments.length?(c=a,f.yScale(a),h):c},h.decorate=function(a){return arguments.length?(e=a,h):e},b.rebind(h,g,"yValue","xValue"),h}function Ma(){var a=b.time.scale(),c=b.scale.linear(),d=80,e=20,f=ba(),g=N,h=ca(),i=va().yValue(function(a,b){return a.stochastic.d}),j=va().yValue(function(a,b){return a.stochastic.k}),k=function(b){f.xScale(a).yScale(c).series([h,i,j]).mapping(function(a){return a===h?[d,e]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi stochastic "+["annotations","stochastic-d","stochastic-k"][b]}),g(a,b,c)}),b.call(f)};return k.xScale=function(b){return arguments.length?(a=b,k):a},k.yScale=function(a){return arguments.length?(c=a,k):c},k.upperValue=function(a){return arguments.length?(d=a,k):d},k.lowerValue=function(a){return arguments.length?(e=a,k):e},k.decorate=function(a){return arguments.length?(g=a,k):g},b.rebind(k,i,"yDValue","xDValue"),b.rebind(k,j,"yKValue","xKValue"),k}function Na(){var a=b.time.scale(),c=b.scale.linear(),d=70,e=30,f=ba(),g=N,h=ca(),i=va().yValue(function(a,b){return a.rsi}),j=function(b){f.xScale(a).yScale(c).series([h,i]).mapping(function(a){return a===h?[d,50,e]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi rsi "+["annotations","indicator"][b]}),g(a,b,c)}),b.call(f)};return j.xScale=function(b){return arguments.length?(a=b,j):a},j.yScale=function(a){return arguments.length?(c=a,j):c},j.upperValue=function(a){return arguments.length?(d=a,j):d},j.lowerValue=function(a){return arguments.length?(e=a,j):e},j.decorate=function(a){return arguments.length?(g=a,j):g},b.rebind(j,i,"yValue","xValue"),j}function Oa(){var a=b.time.scale(),c=b.scale.linear(),d=function(a){return a.date},e=function(a){return a.macd},f=va(),g=va(),h=oa(),i=ba(),j=N,k=function(b){f.xValue(d).yValue(function(a,b){return e(a).macd}),g.xValue(d).yValue(function(a,b){return e(a).signal}),h.xValue(d).yValue(function(a,b){return e(a).divergence}),i.xScale(a).yScale(c).series([h,f,g]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["macd-divergence","macd","macd-signal"][b]}),j(a,b,c)}),b.call(i)};return k.xScale=function(b){return arguments.length?(a=b,k):a},k.xValue=function(a){return arguments.length?(d=a,k):d},k.yScale=function(a){return arguments.length?(c=a,k):c},k.root=function(a){return arguments.length?(e=a,k):e},k.decorate=function(a){return arguments.length?(j=a,k):j},k}function Pa(){var a=b.time.scale(),c=b.scale.linear(),d=function(a,b){return a.close},e=function(a,b){return a.date},f=function(a){return a.bollingerBands},g=N,h=ya().y0Value(function(a,b){return f(a).upper}).y1Value(function(a,b){return f(a).lower}),i=va().yValue(function(a,b){return f(a).upper}),j=va().yValue(function(a,b){return f(a).average}),k=va().yValue(function(a,b){return f(a).lower}),l=function(b){var d=ba().xScale(a).yScale(c).series([h,i,k,j]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi bollinger "+["area","upper","lower","average"][b]}),g(a,b,c)});h.xValue(e),i.xValue(e),j.xValue(e),k.xValue(e),b.call(d)};return l.xScale=function(b){return arguments.length?(a=b,l):a},l.yScale=function(a){return arguments.length?(c=a,l):c},l.xValue=function(a){return arguments.length?(e=a,l):e},l.yValue=function(a){return arguments.length?(d=a,l):d},l.root=function(a){return arguments.length?(f=a,l):f},l.decorate=function(a){return arguments.length?(g=a,l):g},l}function Qa(){var a=b.functor(void 0),c=b.functor(10),d=N,e=L,f=function(b){var f=c.apply(this,arguments),g=b.slice(0,f).map(e);return b.map(function(b,c){return f-1>c?a(b,c):(c>=f&&(g.shift(),g.push(e(b,c))),d(g))})};return f.undefinedValue=function(c){return arguments.length?(a=b.functor(c),f):a},f.windowSize=function(a){return arguments.length?(c=b.functor(a),f):c},f.accumulator=function(a){return arguments.length?(d=a,f):d},f.value=function(a){return arguments.length?(e=a,f):e},f}function Ra(){var a=N,c=Qa(),d=function(d){return b.zip(d,c(d)).forEach(function(b){a(b[0],b[1])})};return d.algorithm=function(a){return arguments.length?(c=a,d):c},d.merge=function(b){return arguments.length?(a=b,d):a},d}function Sa(){var a=9,b=L,c=function(c){var d,e=2/(a+1),f=0;return c.map(function(c,g){if(a-1>g)return void(f+=b(c,g));if(g===a-1){f+=b(c,g);var h=f/a;return d=h,h}var i=b(c,g)*e+(1-e)*d;return d=i,i})};return c.windowSize=function(b){return arguments.length?(a=b,c):a},c.value=function(a){return arguments.length?(b=a,c):b},c}function Ta(){var a=L,c=function(a,b){return a.high},d=function(a,b){return a.low},e=Sa().windowSize(13),f=function(f){e.value(a);var g=e(f),h=b.zip(f,g).map(function(a){return{bullPower:a[1]?c(a[0])-a[1]:void 0,bearPower:a[1]?d(a[0])-a[1]:void 0}});return h};return f.value=function(b){return arguments.length?(a=b,f):a},f.highValue=function(a){return arguments.length?(c=a,f):c},f.lowValue=function(a){return arguments.length?(d=a,f):c},E(f,e,{period:"windowSize"}),f}function Ua(){var a=Ta().value(function(a){return a.close}),c=Ra().algorithm(a).merge(function(a,b){a.elderRay=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"highValue","lowValue","period","value"),d}function Va(){function a(a){return Array.apply(null,new Array(a)).map(d)}var c=Qa().accumulator(b.mean),d=b.functor(void 0),e=function(a){return null==c.value()(a)},f=function(b){for(var d=0;e(b[d])&&d<b.length;)d++;var f=b.slice(d);return a(d).concat(c(f))};return f.algorithm=function(a){return arguments.length?(c=a,f):c},f.undefinedValue=function(a){return arguments.length?(d=b.functor(a),f):d},f.defined=function(a){return arguments.length?(e=a,f):e},f}function Wa(){var a=.1,c=L,d=function(b){return b.map(function(b){return{lower:c(b)*(1-a),upper:c(b)*(1+a)}})};return d.factor=function(b){return arguments.length?(a=b,d):a},d.value=function(a){return arguments.length?(c=b.functor(a),d):c},d}function Xa(){var a=Wa(),c=Va().undefinedValue({lower:void 0,upper:void 0}).algorithm(a),d=Ra().algorithm(c).merge(function(a,b){a.envelope=b}),e=function(a){return d(a)};return e.root=function(a){return a.envelope},b.rebind(e,d,"merge"),b.rebind(e,a,"value","factor"),e}function Ya(){var a=function(a,b){return a.volume},c=function(a,b){return a.close},d=Qa().windowSize(2).accumulator(function(b){return(c(b[1])-c(b[0]))*a(b[1])}),e=function(a){return d(a)};return e.volumeValue=function(b){return arguments.length?(a=b,e):a},e.closeValue=function(a){return arguments.length?(c=a,e):c},b.rebind(e,d,"windowSize"),e}function Za(){var a=Ya(),c=Ra().algorithm(a).merge(function(a,b){a.force=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","volumeValue","closeValue"),d}function $a(){var a=function(a,b){return a.close},c=function(a,b){return a.high},d=function(a,b){return a.low},e=Qa().windowSize(5).accumulator(function(e){var f=b.max(e,c),g=b.min(e,d);return 100*(a(e[e.length-1])-g)/(f-g)}),f=Qa().windowSize(3).accumulator(function(a){return void 0!==a[0]?b.mean(a):void 0}),g=function(a){var b=e(a),c=f(b);return b.map(function(a,b){var d=c[b];return{k:a,d:d}})};return g.closeValue=function(b){return arguments.length?(a=b,g):a},g.highValue=function(a){return arguments.length?(c=a,g):c},g.lowValue=function(a){return arguments.length?(d=a,g):c},E(g,e,{kWindowSize:"windowSize"}),E(g,f,{dWindowSize:"windowSize"}),g}function _a(){var a=$a(),c=Ra().algorithm(a).merge(function(a,b){a.stochastic=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"kWindowSize","dWindowSize","lowValue","closeValue","highValue"),d}function ab(){var a,c,d,e=function(a,b){return a.close},f=function(a,b){var c=b+(a[a.length-1]-b)/a.length;return c},g=function(a,b){return a+b},h=Qa().windowSize(14).accumulator(function(b){var h=b.map(e);if(!a)return void(a=h[0]);var i=[],j=[];h.forEach(function(b){var c=a>b?a-b:0,d=b>a?b-a:0;i.push(c),j.push(d),a=b});var k=c?f(i,c):i.reduce(g)/h.length,l=d?f(j,d):j.reduce(g)/h.length;c=k,d=l;var m=l/k;return 100-100/(1+m)}),i=function(a){return h(a)};return i.closeValue=function(a){return arguments.length?(e=a,i):e},b.rebind(i,h,"windowSize"),i}function bb(){var a=ab(),c=Ra().algorithm(a).merge(function(a,b){a.rsi=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","closeValue"),d}function cb(){var a=Qa().accumulator(b.mean).value(function(a){return a.close}),c=Ra().algorithm(a).merge(function(a,b){a.movingAverage=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","undefinedValue","value"),d}function db(){var a=L,c=Sa().windowSize(12),d=Sa().windowSize(29),e=Sa().windowSize(9),f=Va().algorithm(e),g=function(e){c.value(a),d.value(a);var g=b.zip(c(e),d(e)).map(function(a){return void 0!==a[0]&&void 0!==a[1]?a[0]-a[1]:void 0}),h=f(g);return b.zip(g,h).map(function(a){return{macd:a[0],signal:a[1],divergence:void 0!==a[0]&&void 0!==a[1]?a[0]-a[1]:void 0}})};return g.value=function(b){return arguments.length?(a=b,g):a},E(g,c,{fastPeriod:"windowSize"}),E(g,d,{slowPeriod:"windowSize"}),E(g,e,{signalPeriod:"windowSize"}),g}function eb(){var a=db().value(function(a){return a.close}),c=Ra().algorithm(a).merge(function(a,b){a.macd=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"fastPeriod","slowPeriod","signalPeriod","value"),d}function fb(){var a=Sa().value(function(a){return a.close}),c=Ra().algorithm(a).merge(function(a,b){a.exponentialMovingAverage=b}),d=function(a){return c(a)};return b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","value"),d}function gb(){var a=b.functor(0),c=L,d=function(b){if(0===b.length)return[];var d=c(b[a(b)]);return b.map(function(a,b){return(c(a,b)-d)/d})};return d.baseIndex=function(c){return arguments.length?(a=b.functor(c),d):a},d.value=function(a){return arguments.length?(c=a,d):c},d}function hb(){var a=2,c=Qa().undefinedValue({upper:void 0,average:void 0,lower:void 0}).accumulator(function(c){var d=b.mean(c),e=b.deviation(c);return{upper:d+a*e,average:d,lower:d-a*e}}),d=function(a){return c(a)};return d.multiplier=function(b){return arguments.length?(a=b,d):a},b.rebind(d,c,"windowSize","value"),d}function ib(){var a=hb().value(function(a){return a.close}),c=Ra().algorithm(a).merge(function(a,b){a.bollingerBands=b}),d=function(a){return c(a)};return d.root=function(a){return a.bollingerBands},b.rebind(d,c,"merge"),b.rebind(d,a,"windowSize","value","multiplier"),d}function jb(){var a=10,b=function(b){for(var c=Math.ceil(b.length/a),d=[],e=0;c>e;e++)d.push(b.slice(e*a,(e+1)*a));return d};return b.bucketSize=function(c){return arguments.length?(a=c,b):a},b}function kb(){function a(a){for(var b=a.map(function(a){return[d(a),e(a)]}),c=[],f=1;f<b.length-1;f++){var g=b[f-1],h=b[f],i=b[f+1],j=(g[0]-i[0])*(h[1]-g[1]),k=(g[0]-h[0])*(i[1]-g[1]),l=Math.abs(.5*j*k);c.push(l)}return c}var c=jb(),d=L,e=L,f=function(d){if(c.bucketSize()>=d.length)return d;var e=a(d),f=c(e),g=c(d.slice(1,d.length-1)),h=g.map(function(a,c){var d=f[c],e=b.max(d),g=d.indexOf(e);return a[g]});return[].concat(d[0],h,d[d.length-1])};return b.rebind(f,c,"bucketSize"),f.x=function(a){return arguments.length?(d=a,f):d},f.y=function(a){return arguments.length?(e=a,f):e},f}function lb(){var a=L,c=L,d=jb(),e=function(e){if(d.bucketSize()>=e.length)return e;var f=d(e.slice(1,e.length-1)),g=e[0],h=e[e.length-1],i=[].concat(g,f,h),j=a(g),k=c(g),l=f.map(function(d,e){for(var f,g=-(1/0),h=b.mean(i[e+1],a),l=b.mean(i[e+1],c),m=0;m<d.length;m++){var n=a(d[m]),o=c(d[m]),p=(j-h)*(o-k),q=(j-n)*(l-k),r=Math.abs(.5*p*q);r>g&&(g=r,f=d[m])}return j=a(f),k=c(f),f});return[].concat(e[0],l,e[e.length-1])};return b.rebind(e,d,"bucketSize"),e.x=function(b){return arguments.length?(a=b,e):a},e.y=function(a){return arguments.length?(c=a,e):c},e}function mb(){var a=jb(),c=L,d=function(d){if(a.bucketSize()>d.length)return d;var e=b.extent(d),f=a(d.slice(1,d.length-1)),g=f.map(function(a,b){for(var d,f,g={},h=!0,i=0;i<a.length;i++){var j=c(a[i]);if(j===e[0]||j===e[1])return a[i];void 0===g[j]&&(g[j]=0),g[j]++,g[j]>g[d]||void 0===d?(d=j,f=i,h=!0):g[j]===g[d]&&(h=!1)}return h?a[f]:a[Math.floor(a.length/2)]});return[].concat(d[0],g,d[d.length-1])};return d.bucketSize=function(){return a.bucketSize.apply(this,arguments),d},d.value=function(a){return arguments.length?(c=a,d):c},d}function nb(){function a(a){var b=Object.keys(a[0]).filter(function(a){return a!==c}).map(function(b){var d=a.filter(function(a){return a[b]}).map(function(a){return{x:a[c],y:e(a,b)}});return{key:b,values:d}});return b}function b(a){var b=a.map(function(a){var b=Object.keys(a).filter(function(a){return a!==c});return{key:a[c],values:b.map(function(b){return{x:b,y:e(a,b)}})}});return b}var c="",d="vertical",e=function(a,b){return Number(a[b])},f=function(c){return"vertical"===d?a(c):b(c)};return f.xValueKey=function(a){return arguments.length?(c=a,f):c},f.yValue=function(a){return arguments.length?(e=a,f):e},f.orient=function(a){return arguments.length?(d=a,f):d},f}function ob(){var a=1,c=20,d=.1,e=.1,f=function(f){for(var g=b.random.normal(),h=a/c,i=[],j=0;c+1>j;j++){i.push(f);var k=g()*Math.sqrt(h)*e+(d-e*e/2)*h;f*=Math.exp(k)}return i};return f.period=function(b){return arguments.length?(a=b,f):a},f.steps=function(a){return arguments.length?(c=a,f):c},f.mu=function(a){return arguments.length?(d=a,f):d},f.sigma=function(a){return arguments.length?(e=a,f):e},f}function pb(){function a(a,b){var c=315569e5,d=new Date(a.getTime());return d.setUTCDate(a.getUTCDate()+b),{toDate:d,years:(d.getTime()-a.getTime())/c}}function b(a,b){var g=ob().period(b).steps(a*h).mu(c).sigma(d)(e),l=ob().period(b).steps(a).mu(0).sigma(d)(f);return l=l.map(function(a){var b=Math.min(0,Math.max(i,1)),c=1+b*(1-2*Math.random());return Math.floor(a*c)}),e=g[g.length-1],f=l[l.length-1],k(a,g,l).filter(function(a){return j(a.date)})}var c=.1,d=.1,e=100,f=1e5,g=new Date,h=50,i=.3,j=function(a){return!0},k=function(a,b,c){for(var d,e=[],f=0,i=0;e.length<a;)d=b.slice(i,i+h),e.push({date:new Date(g.getTime()),open:d[0],high:Math.max.apply({},d),low:Math.min.apply({},d),close:d[h-1],volume:c[f]}),i+=h,f+=1,g.setUTCDate(g.getUTCDate()+1);return e},l=function(c){var d,e=g,f=c,h=[];do d=a(e,f),h=h.concat(b(f,d.years)),e=d.toDate,f=c-h.length;while(h.length<c);return h};return l.mu=function(a){return arguments.length?(c=a,l):c},l.sigma=function(a){return arguments.length?(d=a,l):d},l.startPrice=function(a){return arguments.length?(e=a,l):e},l.startVolume=function(a){return arguments.length?(f=a,l):f},l.startDate=function(a){return arguments.length?(g=a,l):g},l.stepsPerDay=function(a){return arguments.length?(h=a,l):h},l.volumeNoiseFactor=function(a){return arguments.length?(i=a,l):i},l.filter=function(a){return arguments.length?(j=a,l):j},l}function qb(){return function(a){var b=a.getDay();return!(0===b||6===b)}}function rb(){function a(a){return a[0].toLowerCase()+a.substr(1)}var c="YAHOO",d="GOOG",e=null,f=null,g=null,h=null,i=!1,j=null,k=a,l=function(a){var l=[];null!=e&&l.push("api_key="+e),null!=f&&l.push("start_date="+f.toISOString().substring(0,10)),null!=g&&l.push("end_date="+g.toISOString().substring(0,10)),null!=h&&l.push("rows="+h),i||l.push("order=asc"),null!=j&&l.push("collapse="+j);var m="https://www.quandl.com/api/v3/datasets/"+c+"/"+d+"/data.json?"+l.join("&");b.json(m,function(b,c){if(b)return void a(b);var d=c.dataset_data,e=k||function(a){return a},f=d.column_names.map(function(a,b){return[b,e(a)]}).filter(function(a){return a[1]}),g=d.data.map(function(a){var b={};return f.forEach(function(c){b[c[1]]=0===c[0]?new Date(a[c[0]]):a[c[0]]}),b});a(b,g)})};return l.database=function(a){return arguments.length?(c=a,l):c},l.dataset=function(a){return arguments.length?(d=a,l):d},l.apiKey=function(a){return arguments.length?(e=a,l):e},l.start=function(a){return arguments.length?(f=a,l):f},l.end=function(a){return arguments.length?(g=a,l):g},l.rows=function(a){return arguments.length?(h=a,l):h},l.descending=function(a){return arguments.length?(i=a,l):i},l.collapse=function(a){return arguments.length?(j=a,l):j},l.columnNameMap=function(a){return arguments.length?(k=a,l):k},l.defaultColumnNameMap=a,l}function sb(){var a="BTC-USD",c=null,d=null,e=null,f=function(f){var g=[];null!=c&&g.push("start="+c.toISOString()),null!=d&&g.push("end="+d.toISOString()),
null!=e&&g.push("granularity="+e);var h="https://api.exchange.coinbase.com/products/"+a+"/candles?"+g.join("&");b.json(h,function(a,b){return a?void f(a):(b=b.map(function(a){return{date:new Date(1e3*a[0]),open:a[3],high:a[2],low:a[1],close:a[4],volume:a[5]}}),void f(a,b))})};return f.product=function(b){return arguments.length?(a=b,f):a},f.start=function(a){return arguments.length?(c=a,f):c},f.end=function(a){return arguments.length?(d=a,f):d},f.granularity=function(a){return arguments.length?(e=a,f):e},f}function tb(a,c){function d(a){return P().selector("g."+a).element("g").attr("class",a)}a=a||b.scale.linear(),c=c||b.scale.linear();var e=10,f=9,g=N,h=va(),i={bottom:30,right:30},j=function(a){return a.values},k=function(a){return a.key},l=ma().ticks(2),m=ma().orient("right").ticks(3),n=d("multiple"),o=d("x-axis"),p=d("y-axis"),q=function(d){d.each(function(d,q){function r(a,b){return{xOffset:(x+e)*a,yOffset:(y+e)*b}}var s=b.select(this),t=Z(i);t.position="absolute";var u=s.selectAll("svg").data([d]);u.enter().append("svg").layout("flex",1).append("g").attr("class","multiples-chart");var v=u.select("g").layout(t);s.layout();var w=Math.ceil(d.length/f),x=v.layout("width")/f-e,y=v.layout("height")/w-e;J(a,[0,x]),J(c,[y,0]),h.xScale(a).yScale(c);var z=n(v,d);z.attr("transform",function(a,b){var c=r(b%f,Math.floor(b/f));return"translate("+c.xOffset+","+c.yOffset+")"});var A=z.enter().append("g");A.append("rect").attr("class","background"),A.append("g").attr("transform","translate("+x/2+", 0)").append("text").attr("class","label").text(k),z.select("g").datum(j).call(h),z.select("rect").attr({width:x,height:y}),g(z,d,q);var B=o(v,b.range(f));B.attr("transform",function(a,b){var c="bottom"===l.orient()?w:0,d="bottom"===l.orient()?0:-e,f=r(b,c);return"translate("+f.xOffset+","+(f.yOffset+d)+")"}),l.scale(a),B.call(l);var C=p(v,b.range(w));C.attr("transform",function(a,b){var c="left"===m.orient()?0:f,d="left"===m.orient()?-e:0,g=r(c,b);return"translate("+(g.xOffset+d)+","+g.yOffset+")"}),m.scale(c),C.call(m)})},r=[/range\w*/,/tickFormat/];return G(q,a,"x",r),G(q,c,"y",r),G(q,l,"x"),G(q,m,"y"),q.columns=function(a){return arguments.length?(f=a,q):f},q.margin=function(a){return arguments.length?(i=a,q):i},q.padding=function(a){return arguments.length?(e=a,q):e},q.plotArea=function(a){return arguments.length?(h=a,q):h},q.values=function(a){return arguments.length?(j=a,q):j},q.key=function(a){return arguments.length?(k=a,q):k},q.decorate=function(a){return arguments.length?(g=a,q):g},q}function ub(){var a=50,c=N,d=[["datum:",function(a){return a.datum}]],e=P().selector("g.cell").element("g").attr("class","cell tooltip"),f=function(f){f.each(function(f,g){var h=b.select(this),i=d.map(function(a,c){return{datum:f,label:b.functor(a[0]),value:b.functor(a[1])}}),j=e(h,i);j.enter().layout({flex:1,flexDirection:"row"}),j.enter().append("text").attr("class","label").layout("flex",a),j.enter().append("text").attr("class","value").layout("flex",100-a),j.select(".label").text(function(a,b){return a.label.call(this,a.datum,b)}),j.select(".value").text(function(a,b){return a.value.call(this,a.datum,b)}),c(j,f,g),h.layout()})};return f.decorate=function(a){return arguments.length?(c=a,f):c},f.split=function(b){return arguments.length?(a=b,f):a},f.items=function(a){return arguments.length?(d=a,f):d},f}function vb(){function a(a){function c(b){return a.filter(function(a){return e(a)===b})[0]}var d=j.xValue(),e=j.yValue(),f=b.max(a,e),g=b.min(a,e);return[{x:d(a[0]),y:e(a[0])},{x:d(c(f)),y:f},{x:d(c(g)),y:g},{x:d(a[a.length-1]),y:e(a[a.length-1])}]}var c=Ha(),e=b.scale.linear(),f=2,g=va(),h=ea().xValue(function(a){return a.x}).yValue(function(a){return a.y}).decorate(function(a){a.attr("class",function(a,b){switch(b){case 0:return"open";case 1:return"high";case 2:return"low";case 3:return"close"}})}),i=ba().series([g,h]).mapping(function(b){switch(b){case h:return a(this);default:return this}}),j=function(a){h.size(f*f*Math.PI),a.each(function(a){var g=b.select(this),h=d(this),j=f;c.range([j,h.width-j]),e.range([h.height-j,j]),i.xScale(c).yScale(e),g.call(i)})};return E(j,c,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain"}),E(j,e,{yDomain:"domain"}),E(j,g,"xValue","yValue"),j.xScale=function(){return c},j.yScale=function(){return e},j.radius=function(a){return arguments.length?(f=a,j):f},j}function wb(a,c){function d(a,b){var c=[/range\w*/,/tickFormat/];if(!H(a)){c.push("ticks");var d={};d[b+"ScaleTicks"]="ticks",E(p,a,d)}G(p,a,b,c)}a=a||b.scale.linear(),c=c||b.scale.linear();var e={bottom:30,right:30},f="",g="",h=null,i=null,j="",k=va(),l=N,m=Da().orient("bottom").baseline(function(){if(null!==h)return c(h.apply(this,arguments));var a=I(c);return"bottom"===m.orient()?a[0]:a[1]}),n=Da().orient("right").baseline(function(){if(null!==i)return a(i.apply(this,arguments));var b=I(a);return"left"===n.orient()?b[0]:b[1]}),o=P().selector("svg.cartesian-chart").element("svg").attr({"class":"cartesian-chart","layout-style":"flex: 1"}),p=function(d){d.each(function(d,h){var i=b.select(this),p=o(i,[d]);p.enter().html('<g class="plot-area-container">                         <rect class="background"                             layout-style="position: absolute; top: 0; bottom: 0; left: 0; right: 0"/>                         <g class="axes-container"                             layout-style="position: absolute; top: 0; bottom: 0; left: 0; right: 0">                             <g class="x-axis" layout-style="height: 0; width: 0"/>                             <g class="y-axis" layout-style="height: 0; width: 0"/>                         </g>                         <svg class="plot-area"                             layout-style="position: absolute; top: 0; bottom: 0; left: 0; right: 0"/>                     </g>                     <g class="x-axis label-container">                         <g layout-style="height: 0; width: 0">                             <text class="label"/>                         </g>                     </g>                     <g class="y-axis label-container">                         <g layout-style="height: 0; width: 0">                             <text class="label"/>                         </g>                     </g>                     <g class="title label-container">                         <g layout-style="height: 0; width: 0">                             <text class="label"/>                         </g>                     </g>');var q=Z(e);p.select(".plot-area-container").layout({position:"absolute",top:q.top,left:q.left,bottom:q.bottom,right:q.right}),p.select(".title").layout({position:"absolute",top:0,alignItems:"center",left:q.left,right:q.right});var r={position:"absolute",top:q.top,bottom:q.bottom,alignItems:"center",flexDirection:"row"};r[n.orient()]=0,p.select(".y-axis.label-container").attr("class","y-axis label-container "+n.orient()).layout(r);var s={position:"absolute",left:q.left,right:q.right,alignItems:"center"};s[m.orient()]=0,p.select(".x-axis.label-container").attr("class","x-axis label-container "+m.orient()).layout(s),i.layout(),p.select(".title .label").text(j),p.select(".y-axis.label-container .label").text(f).attr("transform","right"===n.orient()?"rotate(90)":"rotate(-90)"),p.select(".x-axis.label-container .label").text(g);var t=p.select(".plot-area");J(a,[0,t.layout("width")]),J(c,[t.layout("height"),0]),m.xScale(a).yScale(b.scale.identity()),n.yScale(c).xScale(b.scale.identity()),p.select(".axes-container .x-axis").call(m),p.select(".axes-container .y-axis").call(n),k.xScale(a).yScale(c),t.call(k),l(p,d,h)})};d(a,"x"),d(c,"y");var q=["baseline","xScale","yScale"];return G(p,m,"x",q),G(p,n,"y",q),p.xBaseline=function(a){return arguments.length?(h=b.functor(a),p):h},p.yBaseline=function(a){return arguments.length?(i=b.functor(a),p):i},p.chartLabel=function(a){return arguments.length?(j=a,p):j},p.plotArea=function(a){return arguments.length?(k=a,p):k},p.xLabel=function(a){return arguments.length?(g=a,p):g},p.margin=function(a){return arguments.length?(e=a,p):e},p.yLabel=function(a){return arguments.length?(f=a,p):f},p.decorate=function(a){return arguments.length?(l=a,p):l},p}function xb(){var a=la(),b=la(),c=N,d=N,e=P().selector("line.x").element("line").attr("class","x gridline"),f=P().selector("line.y").element("line").attr("class","y gridline"),g=function(g){g.each(function(g,h){var i=a.scale(),j=b.scale(),k=a(),l=e(this,k);l.attr({x1:i,x2:i,y1:I(j)[0],y2:I(j)[1]}),c(l,k,h);var m=b(),n=f(this,m);n.attr({x1:I(i)[0],x2:I(i)[1],y1:j,y2:j}),d(n,m,h)})};return g.yDecorate=function(a){return arguments.length?(d=a,g):d},g.xDecorate=function(a){return arguments.length?(c=a,g):c},E(g,e,{xKey:"key"}),E(g,f,{yKey:"key"}),G(g,a,"x"),G(g,b,"y"),g}function yb(){var a,c,d,e,f=b.time.scale(),g=b.scale.linear(),h=function(){return I(f)[0]},i=function(){return I(f)[1]},j=function(){return I(g)[0]},k=function(){return I(g)[1]},l=N,m=P().selector("g.annotation").element("g").attr("class","annotation"),n=function(a){a.each(function(a,c){var d=b.select(this),e=m(d,a);e.enter().append("path").classed("band",!0);var f=ka().horizontalAlign("right").verticalAlign("top").x(h).y(j).height(function(){return k.apply(this,arguments)-j.apply(this,arguments)}).width(function(){return i.apply(this,arguments)-h.apply(this,arguments)});e.select("path").attr("d",function(a,b){return f.call(this,[a],b)}),l(e,a,c)})};return n.xScale=function(a){return arguments.length?(f=a,n):f},n.yScale=function(a){return arguments.length?(g=a,n):g},n.decorate=function(a){return arguments.length?(l=a,n):l},n.x0=function(c){return arguments.length?(a=b.functor(c),h=function(){return f(a.apply(this,arguments))},n):a},n.x1=function(a){return arguments.length?(c=b.functor(a),i=function(){return f(c.apply(this,arguments))},n):c},n.y0=function(a){return arguments.length?(d=b.functor(a),j=function(){return g(d.apply(this,arguments))},n):d},n.y1=function(a){return arguments.length?(e=b.functor(a),k=function(){return g(e.apply(this,arguments))},n):e},n}a="default"in a?a["default"]:a,b="default"in b?b["default"]:b;var zb={get randomItem(){return s},get randomIndex(){return t},get cloneAndReplace(){return u}},Ab={get isOrdinal(){return H},get range(){return I},get setRange(){return J}},Bb={get context(){return K},get identity(){return L},get index(){return M},get noop(){return N},get defined(){return O}};b.selection.prototype.layoutSuspended=l,b.transition.prototype.layoutSuspended=l,b.selection.prototype.layout=m,b.transition.prototype.layout=m;var Cb={boundingBox:C,greedy:B,local:A,annealing:y},Db=1e-6,Eb={rectangles:Q,strategy:Cb},Fb={dataJoin:P,expandRect:Z,extent:Y,fn:Bb,minimum:z,fractionalBarWidth:X,innerDimensions:d,rebind:E,rebindAll:G,scale:Ab,noSnap:S,pointSnap:T,seriesPointSnap:U,seriesPointSnapXOnly:V,seriesPointSnapYOnly:W,render:R,arrayFunctor:D,array:zb},Gb={crosshair:fa,fibonacciFan:aa,container:_,measure:$},Hb={axis:ma,bar:ka,candlestick:ja,ohlc:ia,errorBar:ha,boxPlot:ga},Ib={waterfall:na},Jb={area:za,bar:xa,stack:ua,line:wa},Kb={area:ya,axis:Da,bar:oa,candlestick:Ca,cycle:Ba,line:va,multi:ba,ohlc:Aa,point:ea,stacked:Jb,groupedBar:ta,xyBase:da,ohlcBase:sa,errorBar:ra,boxPlot:qa,waterfall:pa,algorithm:Ib};Ha.tickTransformer=Fa;var Lb={discontinuity:{identity:Ea,skipWeekends:Ia},dateTime:Ha},Mb={bollingerBands:Pa,macd:Oa,relativeStrengthIndex:Na,stochasticOscillator:Ma,forceIndex:La,envelope:Ka,elderRay:Ja},Nb={bollingerBands:hb,exponentialMovingAverage:Sa,macd:db,percentageChange:gb,relativeStrengthIndex:ab,stochasticOscillator:$a,slidingWindow:Qa,undefinedInputAdapter:Va,forceIndex:Ya,envelope:Wa,elderRay:Ta},Ob={bollingerBands:ib,calculator:Nb,exponentialMovingAverage:fb,macd:eb,merge:Ra,movingAverage:cb,relativeStrengthIndex:bb,stochasticOscillator:_a,forceIndex:Za,envelope:Xa,elderRay:Ua},Pb={algorithm:Ob,renderer:Mb},Qb={modeMedian:mb,largestTriangleThreeBucket:lb,largestTriangleOneBucket:kb,bucket:jb},Rb={filter:{skipWeekends:qb},financial:pb,walk:ob},Sb={coinbase:sb,quandl:rb},Tb={feed:Sb,random:Rb,spread:nb,sampler:Qb},Ub={cartesian:wb,sparkline:vb,tooltip:ub,smallMultiples:tb},Vb={band:yb,gridline:xb,line:ca},Wb="5.3.0",Xb={annotation:Vb,chart:Ub,data:Tb,indicator:Pb,scale:Lb,series:Kb,svg:Hb,tool:Gb,util:Fb,version:Wb,layout:Eb};return Xb});
//# sourceMappingURL=d3fc.min.js.map